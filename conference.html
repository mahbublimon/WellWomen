<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consultation Conference</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
</head>

<body>
    <div class="container py-5">
        <h2 class="text-center">Consultation with Dr. <span id="consultant-name">Loading...</span></h2>
        <p class="text-center">Please grant microphone and camera permissions to start the video conference.</p>

        <!-- Video Conference Section -->
        <div class="text-center">
            <video id="localVideo" autoplay muted></video>
            <video id="remoteVideo" autoplay></video>
        </div>

        <div class="d-flex justify-content-center mt-4">
            <button id="startButton" class="btn btn-primary">Start Conference</button>
        </div>
    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const consultantId = urlParams.get('consultant');
        const consultantNames = ["Dr. Jane Doe", "Dr. John Smith", "Dr. Emily Zhao", "Dr. Samir Khan", "Dr. Lily Johnson", "Dr. Aaron Lee"];
        document.getElementById('consultant-name').textContent = consultantNames[consultantId - 1];

        // WebRTC Setup
        let localStream;
        let peerConnection;

        // Get user media (camera and microphone)
        async function getUserMedia() {
            try {
                localStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
                document.getElementById('localVideo').srcObject = localStream;
            } catch (error) {
                alert("Please enable your camera and microphone.");
            }
        }

        // Start the video conference
        document.getElementById('startButton').addEventListener('click', () => {
            getUserMedia().then(() => {
                alert("Conference Started");
                // Here, you would normally initialize WebRTC peer connection
                // and start connecting to the remote consultant.
            });
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js"></script>
</body>

</html>